"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[142],{620:function(t,e,i){i.d(e,{r:function(){return a}});var n=i(595),s=i(610),r=i(450),o=i(533);const c=(0,r.kP)("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",8);class h{constructor(t){this.uid=c();const e=document.createElement("div"),i=new Image;e.className="krz-object",e.style.display=t.isShow?"block":"none",e.setAttribute("data-id",this.uid),i.className="krz-object-img",i.src=t.img,t.width&&(i.width=t.width),t.height&&(i.height=t.height),e.style.left=t.x+"px",e.style.top=t.y+"px",e.appendChild(i),document.querySelector(".krz-object-container").appendChild(e),this.img=t.img,this.element=e,this.imageElement=i,this.isShow=t.isShow||!0,this.isAnimating=!1,this.name=t.name,this.description=t.description,this.isItem=t.isItem,this.isSelectAsItem=!1,this.isItem&&this.onclick(async function(){await(0,n.KF)(this),(0,s.L0)(this)}.bind(this)),!t.name&&!t.description||this.isItem||this.onclick(function(){(0,n.QH)(this)}.bind(this)),(0,o.c)("放置物品：",{name:this.name||"",uid:this.uid})}show(){return(0,o.c)("显示物品",{name:this.name||"",uid:this.uid}),this.isShow=!0,(this.element.style.display="block")&&this}hide(){return(0,o.c)("隐藏物品",{name:this.name||"",uid:this.uid}),this.isShow=!1,(this.element.style.display="none")&&this}remove(){return(0,o.c)("移除物品",{name:this.name||"",uid:this.uid}),this.isShow=!1,this.element.remove()&&this}setX(t){return(this.element.style.left=t+"px")&&this}setY(t){return(this.element.style.top=t+"px")&&this}setWidth(t){return(this.imageElement.width=t)&&this}setHeight(t){return(this.imageElement.height=t)&&this}setImage(t){return(this.imageElement.src=t)&&this}moveTo(t,e,i=2){return(0,o.c)("物品动画开始",{name:this.name||"",uid:this.uid}),this.isAnimating=!0,new Promise(function(n){this.element.style.transition=`ease-in-out ${i}s`,this.setX(t),this.setY(e),setTimeout(function(){this.element.style.transition="unset",this.isAnimating=!1,(0,o.c)("物品动画结束",{name:this.name||"",uid:this.uid}),n()}.bind(this),1e3*i)}.bind(this))}goTo(t,e){return this.setX(t),this.setY(e),this}onclick(t){return(0,o.c)("添加监听点击事件",{name:this.name||"",uid:this.uid}),this.element.addEventListener("click",(function(e){"function"==typeof t&&t(e)}))}clicked(){return new Promise(function(t){(0,o.c)("等待物品被点击",{name:this.name||"",uid:this.uid}),this.onclick(t)}.bind(this))}touch(t){return new Promise(async function(e){(0,o.c)("等待物品执行拖动触碰",{name:this.name||"",uid:this.uid}),(0,s.l9)(this,t,e)}.bind(this))}isShow(){return this.isShow}isAnimating(){return this.isAnimating}showInfoHighlight(){return(0,n.QH)(this)}hideInfoHighlight(){return(0,n.ts)(this)}}function a(t){return new h(t)}},370:function(t,e,i){i.d(e,{s:function(){return a}});var n=i(931),s=i(620),r=i(571),o=i.n(r),c=i(533),h=i(905);const a=new class{constructor(){this.scale=1,this._handleCanvasSize(),window.addEventListener("resize",o()(this._handleCanvasSize,100)),(0,c.c)("初始化屏幕")}_handleCanvasSize(){const t=window.innerHeight,e=window.innerWidth;this.scale=Math.min(t/600,e/900),n.lw.style.height="600px",n.lw.style.width="900px",n.lw.style.transform=`scale(${this.scale})`,(0,c.c)("调整屏幕尺寸")}place(t={x:0,y:0,img:"",width:0,height:0,name:"",description:"",isShow:!0,isItem:!1}){return(0,s.r)(t)}background(t){this.backgroungImage=t,n.lw.style.backgroundImage=`url("${t}")`,(0,c.c)("设置背景图片")}showLoadingAnimation(){n.ay.innerHTML='\n<div class="krz-loading ">\n    <img class="krz-loading-img krz-animate-pulse"\n        src="https://s-sh-1943-mingyan-static.oss.dogecdn.com/image/public/logo-v2/256x256.png">\n    <div class="krz-loading-text">加载资源中……</div>\n</div>',n.ay.style.display="block",(0,c.c)("显示加载中页面")}hideLoadingAnimation(){n.ay.innerHTML="",n.ay.style.display="none",(0,c.c)("隐藏加载中页面")}preFetch(t){return(0,c.n)(t)}fullInfo(t){return async function(t){return(0,c.c)("开始展示全屏幕文字",{text:t}),new Promise((async function(e){n.T8.innerHTML='\n  <div class="krz-screen-info-words">\n      <div class="krz-screen-info-words-print"></div>\n  </div>',n.T8.style.display="flex",t=(t=t.replace(/(，|。|\\n)/gi,"$1\n")).split("\n");for(let e of t){let t=document.createElement("div");t.className="krz-screen-info-text",document.querySelector(".krz-screen-info-words-print").appendChild(t),e=e.split("");for(let i of e)await(0,h.c)(t,i,{waitTime:50}),document.querySelector(".krz-screen-info-words-print").clientHeight>n.T8.clientHeight&&document.querySelector(".krz-screen-info-text:first-child").remove()}document.querySelector(".krz-screen-info").addEventListener("click",(function(){document.querySelector(".krz-screen-info").classList.add("krz-animate-fadeOut"),setTimeout((function(){n.T8.style.display="none",document.querySelector(".krz-screen-info").classList.remove("krz-animate-fadeOut"),(0,c.c)("结束展示全屏幕文字"),e()}),500)}))}))}(t)}dialog(t){return(0,h.v)(t)}}},533:function(t,e,i){i.d(e,{c:function(){return n},n:function(){return s}});const n=function(){let t=0;return function(){t++,console.log(`[${(new Date).getHours()}:${(new Date).getMinutes()}]#${t} ->`,...arguments)}}();function s(t){n("预加载资源");let e=[];for(let i in t)e.push(t[i]);return Promise.all(e.map((function(t){return new Promise((function(e){let i=new Image;i.src=t,i.addEventListener("load",e)}))})))}window.log=n}},function(t){t.O(0,[797,19,98],(function(){return 291,t(t.s=291)})),t.O()}]);