"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[142],{620:(e,t,i)=>{i.d(t,{r:()=>a});var n=i(595),s=i(610),r=i(450),o=i(533);const h=(0,r.kP)("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",8);class c{constructor(e){this.uid=h();const t=document.createElement("div"),i=new Image;t.className="krz-object",t.style.display=e.isShow?"block":"none",t.setAttribute("data-id",this.uid),i.className="krz-object-img",i.src=e.img,e.width&&(i.width=e.width),e.height&&(i.height=e.height),t.style.left=e.x+"px",t.style.top=e.y+"px",t.appendChild(i),document.querySelector(".krz-object-container").appendChild(t),this.img=e.img,this.element=t,this.imageElement=i,this.isShow=e.isShow||!0,this.isAnimating=!1,this.name=e.name,this.description=e.description,this.isItem=e.isItem,this.isSelectAsItem=!1,this.isItem&&this.onclick(async function(){await(0,n.KF)(this),(0,s.L0)(this)}.bind(this)),!e.name&&!e.description||this.isItem||this.onclick(function(){(0,n.QH)(this)}.bind(this)),(0,o.c)("放置物品：",{name:this.name||"",uid:this.uid})}show(){return(0,o.c)("显示物品",{name:this.name||"",uid:this.uid}),this.isShow=!0,(this.element.style.display="block")&&this}hide(){return(0,o.c)("隐藏物品",{name:this.name||"",uid:this.uid}),this.isShow=!1,(this.element.style.display="none")&&this}remove(){return(0,o.c)("移除物品",{name:this.name||"",uid:this.uid}),this.isShow=!1,this.element.remove()&&this}setX(e){return(this.element.style.left=e+"px")&&this}setY(e){return(this.element.style.top=e+"px")&&this}setWidth(e){return(this.imageElement.width=e)&&this}setHeight(e){return(this.imageElement.height=e)&&this}setImage(e){return(this.imageElement.src=e)&&this}moveTo(e,t,i=2){return(0,o.c)("物品动画开始",{name:this.name||"",uid:this.uid}),this.isAnimating=!0,new Promise(function(n){this.element.style.transition=`ease-in-out ${i}s`,this.setX(e),this.setY(t),setTimeout(function(){this.element.style.transition="unset",this.isAnimating=!1,(0,o.c)("物品动画结束",{name:this.name||"",uid:this.uid}),n()}.bind(this),1e3*i)}.bind(this))}goTo(e,t){return this.setX(e),this.setY(t),this}onclick(e){return(0,o.c)("添加监听点击事件",{name:this.name||"",uid:this.uid}),this.element.addEventListener("click",(function(t){"function"==typeof e&&e(t)}))}clicked(){return new Promise(function(e){(0,o.c)("等待物品被点击",{name:this.name||"",uid:this.uid}),this.onclick(e)}.bind(this))}touch(e){return new Promise(async function(t){(0,o.c)("等待物品执行拖动触碰",{name:this.name||"",uid:this.uid}),(0,s.l9)(this,e,t)}.bind(this))}isShow(){return this.isShow}isAnimating(){return this.isAnimating}showInfoHighlight(){return(0,n.QH)(this)}hideInfoHighlight(){return(0,n.ts)(this)}}function a(e){return new c(e)}},370:(e,t,i)=>{i.d(t,{s:()=>a});var n=i(931),s=i(620),r=i(571),o=i.n(r),h=i(533),c=i(905);const a=new class{constructor(){this.scale=1,this._handleCanvasSize(),window.addEventListener("resize",o()(this._handleCanvasSize,100)),(0,h.c)("初始化屏幕")}_handleCanvasSize(){const e=window.innerHeight,t=window.innerWidth;this.scale=Math.min(e/600,t/900),n.lw.style.height="600px",n.lw.style.width="900px",n.lw.style.transform=`scale(${this.scale})`,(0,h.c)("调整屏幕尺寸")}place(e={x:0,y:0,img:"",width:0,height:0,name:"",description:"",isShow:!0,isItem:!1}){return(0,s.r)(e)}background(e){this.backgroungImage=e,n.lw.style.backgroundImage=`url("${e}")`,(0,h.c)("设置背景图片")}showLoadingAnimation(){n.ay.innerHTML='\n<div class="krz-loading ">\n    <img class="krz-loading-img krz-animate-pulse"\n        src="https://s-sh-1943-mingyan-static.oss.dogecdn.com/image/public/logo-v2/256x256.png">\n    <div class="krz-loading-text">加载资源中……</div>\n</div>',n.ay.style.display="block",(0,h.c)("显示加载中页面")}hideLoadingAnimation(){n.ay.innerHTML="",n.ay.style.display="none",(0,h.c)("隐藏加载中页面")}preFetch(e){return(0,h.n)(e)}fullInfo(e){return async function(e){return(0,h.c)("开始展示全屏幕文字",{text:e}),new Promise((async function(t){n.T8.innerHTML='\n  <div class="krz-screen-info-words">\n      <div class="krz-screen-info-words-print"></div>\n  </div>',n.T8.style.display="flex",e=(e=e.replace(/(，|。|\\n)/gi,"$1\n")).split("\n");for(let t of e){let e=document.createElement("div");e.className="krz-screen-info-text",document.querySelector(".krz-screen-info-words-print").appendChild(e),t=t.split("");for(let i of t)await(0,c.c)(e,i,{waitTime:50}),document.querySelector(".krz-screen-info-words-print").clientHeight>n.T8.clientHeight&&document.querySelector(".krz-screen-info-text:first-child").remove()}document.querySelector(".krz-screen-info").addEventListener("click",(function(){document.querySelector(".krz-screen-info").classList.add("krz-animate-fadeOut"),setTimeout((function(){n.T8.style.display="none",document.querySelector(".krz-screen-info").classList.remove("krz-animate-fadeOut"),(0,h.c)("结束展示全屏幕文字"),t()}),500)}))}))}(e)}dialog(e){return(0,c.v)(e)}}},533:(e,t,i)=>{i.d(t,{c:()=>n,n:()=>s});const n=function(){let e=0;return function(){e++,console.log(`[${(new Date).getHours()}:${(new Date).getMinutes()}]#${e} ->`,...arguments)}}();function s(e){n("预加载资源");let t=[];for(let i in e)t.push(e[i]);return Promise.all(t.map((function(e){return new Promise((function(t){let i=new Image;i.src=e,i.addEventListener("load",t)}))})))}window.log=n}},e=>{e.O(0,[797,19,98],(()=>(291,e(e.s=291)))),e.O()}]);